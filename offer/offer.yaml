swagger: "2.0"
info:
  version: v1
  title: Offer API
  description: |
    Offer API lets you initiate, track and execute offers for loans, deposits, credit facilities and current accounts. It provides simulation of conditions for potential products and services. The offer process it defined primarily by the nature of the product or  service being considered, but can include actions such as document checks, collateral allocation, credit assessments, underwriting decisions, regulatory and procedural checks, eligibility checks, the use of internal and external specialist services (such as evaluations and legal advice).
  contact:
    name: Biljana Nikolic
    url: http://dev.asseco-see.com/docs/
    email: biljana.davidovic@asseco-see.rs
host: dev.asseco-see.com
basePath: /v1/offer
schemes:
  - http
  - https
consumes:
  - application/json
produces:
  - application/json
tags:
  -
    name: Drafts
    description: Working with application drafts
  -
    name: Applications
    description: Working with product applications
  -
    name: Calculations
    description: Working with calculations
    
  -
    name: Classifications
    description: Working with classifications

paths:
  /me/drafts:
    post:
      operationId: Drafts_Create
      summary: Save new draft
      tags:
        - Drafts
      parameters:
        - description: Draft to be saved
          in: body
          name: draft
          required: true
          schema:
            $ref: '#/definitions/draft'
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/resource-created-result'
        default:
          $ref: '#/responses/default-error-response'  
    get:
      summary: List saved drafts for customer
      tags:
        - Drafts
      operationId: Drafts_GetList
      responses:
        '200':
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/draft'
        default:
          $ref: '#/responses/default-error-response'          
  /me/drafts/{draft-id}:
    parameters:
      - $ref: "#/parameters/draft-id-param"  
    get:
      summary: Get saved draft
      tags:
        - Drafts
      operationId: Drafts_Get
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/draft'
        default:
          $ref: '#/responses/default-error-response'
    delete:
      summary: Delete saved draft
      tags:
        - Drafts
      operationId: Drafts_Delete
      responses:
        '204':
          description: No content - draft deleted
        default:
          $ref: '#/responses/default-error-response'          
    put:
      operationId: Drafts_Update
      summary: Replace saved draft
      tags:
        - Drafts
      parameters:
        - description: Modified draft 
          in: body
          name: draft
          required: true
          schema:
            $ref: '#/definitions/draft'
      responses:
        '204':
          description: No content - draft updated
        default:
          $ref: '#/responses/default-error-response'           

  /applications:
    get:
      summary: List product applications for customer
      tags:
        - Applications
      x-asee-tags:
        - Shapeable
        - Sortable
        - Pageable
      operationId: Applications_GetList
      parameters:
        - $ref: "#/parameters/statuses-param"
        - $ref: '#/parameters/kinds-param'
        - $ref: "#/parameters/customer-number-param"
        - $ref: "#/parameters/page-param"
        - $ref: "#/parameters/page-size-param"
        - $ref: "#/parameters/sort-by-param"
        - $ref: "#/parameters/sort-order-param"
        - $ref: "#/parameters/trim-param"        
        - $ref: "#/parameters/include-param"          
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/application-list'
        default:
          $ref: '#/responses/default-error-response'
  /applications/{application-number}:
    get:
      summary: Gets details of specific product application
      tags:
        - Applications
      x-asee-tags:
        - Shapeable        
      operationId: Applications_Get
      parameters:
        - $ref: "#/parameters/application-number-param"
        - $ref: "#/parameters/trim-param"        
        - $ref: "#/parameters/include-param"          
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/application'
        default:
          $ref: '#/responses/default-error-response'
  
  /applications/{application-number}/attachments:
    put:
      summary: Add additional documents to application
      tags:
        - Applications
      operationId: Applications_AttachDocuments
      parameters:
        - $ref: '#/parameters/application-number-param'
        - name: cmd
          description: Comand with details of attached documents
          in: body
          schema:
            $ref: '#/definitions/attach-documents-command'        
      responses:
        '204':
          description: No content
        default:
          $ref: '#/responses/default-error-response'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'            
        '440':
          description: |
            Your request was well constructed but it does not comply with business policy. Consider the following possible problems and look into response for more details:
            
              - [product-not-valid]()
              - [deposit-account-opening-maxnumber]()          

  /applications/{application-number}/cancel:
    post:
      summary: Cancel product application
      tags:
        - Applications
      operationId: Applications_Cancel
      parameters:
        - $ref: '#/parameters/application-number-param'
        - name: cmd
          description: Comand with details of cancelation
          in: body
          schema:
            $ref: '#/definitions/cancel-application-command'        
      responses:
        '204':
          description: No content
        default:
          $ref: '#/responses/default-error-response'

  /applications/deposit-openings:
    post:
      deprecated: false
      operationId: DepositOpenings_Initiate
      summary: Initiate new deposit opening
      tags:
        - Applications
      parameters:
        - description: Command with details to initiate  deposit account opening
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/initiate-deposit-opening-command'
      responses:
        '202':
          description: Accepted
          schema:
            $ref: '#/definitions/resource-created-result'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'            
        '440':
          description: |
            Your request was well constructed but it does not comply with business policy. Consider the following possible problems and look into response for more details:
            
              - [product-not-valid]()
              - [deposit-account-opening-maxnumber]()
          schema:
            $ref: '#/definitions/business-problem'
        default:
          $ref: '#/responses/default-error-response'  
          
  /applications/deposit-openings/{application-number}/accept:
    post:
      summary: Accept offered deposit terms
      description: After customer accepts the terms account and arrangement are established
      tags:
        - Applications
      operationId: DepositOpenings_Accept
      parameters:
        - $ref: "#/parameters/application-number-param"
        - name: cmd
          description: Comand with details of offer acceptance
          in: body
          schema:
            $ref: '#/definitions/accept-deposit-offer-command'
      responses:
        '204':
          description: No content
        '400':
          description: Your request was not valid. Look into validation errors provided in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'
        '440':
          description: |
            Your request was well constructed but it does not comply with business policy. Consider the following possible problems and look into response for more details:

             - [customer-not-found]()
             - [account-exists]()
             - [product-not-valid]()
          schema:
            $ref: '#/definitions/business-problem'
        default:
          $ref: '#/responses/default-error-response'          

  /applications/loan-originations:
    post:
      summary: Initiate new loan origination
      tags:
         - Applications
      deprecated: false
      operationId: LoanOriginations_Initiate
      parameters:
        - description: Command with details to initiate loan origination
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/initiate-loan-origination-command'
      responses:
        '202':
          description: Accepted
          schema:
            $ref: '#/definitions/resource-created-result'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'            
        '440':
          description: |
            Your request was well constructed but it does not comply with business policy. Consider the following possible problems and look into response for more details:
              - [product-not-valid]()
          schema:
            $ref: '#/definitions/business-problem'
        default:
          $ref: '#/responses/default-error-response'          

  /applications/loan-originations/{application-number}/accept:
    post:
      summary: Accept offered loan terms
      description: After customer accepts the terms account and arrangement are established
      tags:
        - Applications
      operationId: LoanOriginations_Accept
      parameters:
        - $ref: "#/parameters/application-number-param"
        - name: cmd
          description: Comand with details of offer acceptance
          in: body
          schema:
            $ref: '#/definitions/accept-lending-offer-command'
      responses:
        '204':
          description: No content
        '400':
          description: Your request was not valid. Look into validation errors provided in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'
        '440':
          description: |
            Your request was well constructed but it does not comply with business policy. Consider the following possible problems and look into response for more details:

             - [customer-not-found]()
             - [account-exists]()
             - [product-not-valid]()
          schema:
            $ref: '#/definitions/business-problem'
        default:
          $ref: '#/responses/default-error-response'
          
  /calculations/service-fee:
    get:
      summary: Calculate fees and taxes for the service
      tags:
        - Calculations
      deprecated: false
      operationId: Calculations_ServiceFee
      parameters:
        - description: Parameters for service fee calculation
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/service-fee-calculation-request'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/service-fee-calculation'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'               
        default:
          $ref: '#/responses/default-error-response'

  /calculations/deposit-terms:
    get:
      summary: Calculate deposit offer terms for specific customer
      tags:
        - Calculations
      operationId: CalculateDepositTerms
      parameters:
        - description: Parameters for calculating deposit offer terms
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/deposit-terms-request'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/deposit-terms'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'            
        default:
          $ref: '#/responses/default-error-response'

  /calculations/lending-terms:
    get:
      summary: Calculate lending offer terms for specific customer
      tags:
        - Calculations
      operationId: CalculateLendingTerms
      parameters:
        - description: Parameters for calculating lending offer terms
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/lending-terms-request'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/lending-terms'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'            
        default:
          $ref: '#/responses/default-error-response'    

  /calculations/installment-plan:
    get:
      summary: Calculate installment plan
      description: Response contains repayment plan with amortization table
      tags:
        - Calculations
      operationId: CalculateInstallmentPlan
      parameters:
        - description: Parameters to calculate installment plan and EIR
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/installment-plan-request'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/installment-plan'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'   
        default:
          $ref: '#/responses/default-error-response'

  /calculations/deposit-offer-text:
    get:
      summary: Prepare deposit offer text for specific customer
      tags:
        - Calculations
      operationId: PrepareDepositOfferText
      parameters:
        - description: Parameters for preparing deposit offer text
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/deposit-offer-text-request'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/deposit-offer-text'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'            
        default:
          $ref: '#/responses/default-error-response' 

  /calculations/lending-offer-text:
    get:
      summary: Prepare deposit offer text for specific customer
      tags:
        - Calculations
      operationId: PrepareLendingOfferText
      parameters:
        - description: Parameters for preparing deposit offer text
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/lending-offer-text-request'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/lending-offer-text'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'            
        default:
          $ref: '#/responses/default-error-response'   

  /calculations/required-documents:
    get:
      summary: Determine required documents for application
      tags:
        - Calculations
      operationId: DetermineRequiredDocuments
      parameters:
        - description: Parameters to determine required documents
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/required-documentation-request'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/required-documentation'
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'            
        default:
          $ref: '#/responses/default-error-response'   

  /classifications: 
    get:
      summary: List all classification schemas used by the API
      description: Some fields and parameters have been restricted to a list of allowed lookup values maintained by the bank. This method lists all schemas used in this API.    
      operationId: "Classifications_GetList"
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/classification-list'
        default:
          $ref: '#/responses/default-error-response'
      tags:
        - Classifications

  /classifications/{schema-id}:
    get:
      summary: List values allowed by given classification schema.
      description: Returns all classification values for chosen classification.
      operationId: Classifications_Get
      parameters:
        - $ref: '#/parameters/schema-id-param'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/classification'
        default:
          $ref: '#/responses/default-error-response'
      tags:
        - Classifications

responses:
  default-error-response:
    description: Besides specific status codes above, other standard http [status codes](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html) can be returned for each request. To learn more see general guidance on [error handling](common-getstarted.html#error-handling)
parameters:
  application-number-param:
    description: Unique identifier for workitem.
    in: path
    name: application-number
    required: true
    type: string
  draft-id-param:
    description: Unique identifier for draft aplication
    in: path
    name: draft-id
    required: true
    type: string    
  customer-number-param:
    description: Unique identifier for fully registered customer.
    in: query
    name: customer-number
    required: false
    type: string
  statuses-param:
    name: statuses
    description: Application statuses to filter the result. If empty or not present applications having any status are returned
    type: array
    collectionFormat: csv
    in: query
    items:
      type: string
      enum: [accepted, active, rejected, canceled, approved]
      x-asee-enumeration: processing-status
  kinds-param:
    name: kinds
    description: Application kinds to filter the results. If empty or not present all kinds are returned
    type: array
    collectionFormat: csv
    in: query
    items:
      type: string
      enum: [deposit-opening, current-account-opening, loan-origination]
      x-asee-enum: application-kind
  schema-id-param:
    name: schema-id
    description: Identifier of classification schema
    in: path
    required: true
    type: string
  page-param:
    name: page
    in: query
    description: Page index. For more information see general guidance on [paging](common-getstarted.html#paging)
    type: integer
    default: 1
    x-asee-common: true
  page-size-param:
    name: page-size
    in: query
    description: Number of items on a page. For more information see general guidance on [paging](common-getstarted.html#paging)
    required: false
    type: integer
    default: 10
    x-asee-common: true    
  sort-order-param:
    description: Sort order (`asc` or `desc`). Default is asc. For more information see general guidance on [sorting](common-getstarted.html#sorting)
    in: query
    name: sort-order
    type: string
    default: asc
    enum:
    - asc
    - desc
    x-asee-common: true  
  sort-by-param:  
    description: Attribute of the collection item to sort by. For more information see general guidance on [sorting](common-getstarted.html#sorting)
    in: query
    name: sort-by
    type: string
    x-asee-common: true      
  include-param:
    description: List of fields to include in response. For more information see general guidance on [response shaping](common-getstarted.html#shaping)
    in: query
    name: include
    type: array
    items:
      type: string
    collectionFormat: csv
    x-asee-common: true      
  trim-param:
    description: List of fields to trim from response. For more information see general guidance on [response shaping](common-getstarted.html#shaping)
    in: query
    name: trim
    type: array
    items:
      type: string
    collectionFormat: csv
    x-asee-common: true
definitions:
  accept-lending-offer-command:
    description:  Parameters for product origination acceptance
    properties:
      accepted-amount:
        description: Accepted amount.
        $ref: '#/definitions/currency'
      application-kind:
        description: Enumeration that distinguishes different kinds of product applications
        type: string
        enum: [deposit-opening, current-account-opening, loan-origination]
        x-asee-enumeration: application-kind
    type: object
    
  accept-deposit-offer-command:
    description:  Parameters for product origination acceptance
    properties:
      accepted-amount:
        description: Accepted amount.
        $ref: '#/definitions/currency'
      deposit-opening-kind:
        description: Enumeration that distinguishes different kinds of product applications
        type: string
        enum: [term-deposit, sight-deposit, current-account]
    type: object    
    
  cancel-application-command:
    description:  Parameters for product origination acceptance
    properties:
      cancelation-reason:
        description: Customer's reason to cancel active application
        type: string
        x-asee-classification: cancelation-reason
      kind:
        description: Enumeration that distinguishes different kinds of product applications
        type: string
        enum: [deposit-opening, current-account-opening, loan-origination]
        x-asee-enumeration: application-kind     
    type: object  
    
  initiate-deposit-opening-command:
    description: Parameters for initiate deposit account opening.
    properties:
      deposit-opening-kind:  
        description: Enumeration that distinguishes different kinds of product applications
        type: string
        enum: [term-deposit, sight-deposit, current-account] 
      amount:
        description: Amount of deposit
        $ref: '#/definitions/currency'
      customer-number:
        description: Customer number of owner of arrangement.
        type: string
      term:
        description: The term of deposit. For sight desposits this fiels is optional
        type: string
        format: ISO 8601 duration
      primary-currency:
        description: Primary currency of selected product
        type: string              
      product-code:
        description: A code or short name by which a product can be identified.
        type: string
      signing-option:
        description: Indicates how and where customer chose to sign agreement documents
        type: string
        enum: [branch, courier, online]   
      requested-account-number:
        description: Optional account number requested by customer
        type: string               
      nickname:
        description: Nickname of account
        type: string
      parent-arrangement-number:
        description: Optional account number of parent arrangement under which deposit is open
        type: string
      requested-activation-date:
        description: Requested activation date
        format: date-time
        type: string   
      campaign-code:
        description: A code by which a campaign can be identified.
        type: string             
    required:
      - amount
      - customer-number
      - product-code
    type: object

    
  initiate-loan-origination-command:
    description: Command with details neccesery to initiate loan origination
    properties:
      loan-origination-kind:  
        description: Enumeration that distinguishes different kinds of product applications
        type: string
        enum: [term-loan, overdraft, credit-card, mortgage]
        x-asee-enumeration: application-kind    
      requested-amount:
        description: Requested amount to borrow
        $ref: '#/definitions/currency'
      downpayment-amount:
        description: Downpayment amount.
        $ref: '#/definitions/currency'
      invoice-amount:
        description: Invoice amount.
        $ref: '#/definitions/currency'     
      product-code:
        description: A code or short name by which a product can be identified.
        type: string        
      term:
        description: Loan period.
        type: string
        format: ISO 8601 duration    
      requested-activation-date:
        description: Requested activation date
        format: date-time
        type: string 
      loan-purposes:
        description: List of loan purposes.
        items:
          $ref: '#/definitions/loan-purpose'
        type: array
      lending-terms:
        $ref: '#/definitions/lending-terms'
      installment-plan:
        $ref: '#/definitions/installment-plan'
      is-refinancing:
        description: Indicator if this is the refinancing loan.
        type: boolean
      signing-option:
        description: Indicates how and where customer chose to sign agreement documents
        type: string
        enum: [branch, courier, online]        
      credit-bureau-consent:
        description: Consent for credit bureau inquiry
        type: boolean        
      applicant:
        description: Applicant data
        $ref: '#/definitions/applicant-info'        
      attachments:
        type: array
        items:
          $ref: '#/definitions/attachment'        
  
  attach-documents-command:
    description: Command with specification of attached documents
    properties:
      documents:
        type: array
        items:
          $ref: '#/definitions/document'
          
  attachment:
    description: Command with details of attachement
    properties:      
      attachment-url:
        type: string
        format: url
        description: URL of document content in DMS
      attachment-id:
        type: string
        description: Unique identifier of document in DMS
      document-type:
        type: string
        x-asse-classification: document-type
        description: specific purpose of this document

  required-documentation-request:
    properties:
      product-code:
        type: string
        description: The unique identifier of a Product
      work-item-type:
        x-asee-compliance: Is this property used at all? How come that the document has work-item-type, and that the product does not have one? 
        type: string
        description: Identifies Work Item Type for which the document is associated with      
      work-item-phase:
        type: string
        description: Identifies Work Item Phase in which a document is introduced
  required-documentation:
    properties:
      documention: 
        items: 
          $ref: "#/definitions/document"
  document:
    description: Document related to product or workitem
    type: object
    properties:
      product-code:
        type: string
        description: The unique identifier of a Product
      work-item-type:
        x-asee-compliance: Is this property used at all? How come that the document has work-item-type, and that the product does not have one? 
        type: string
        description: Identifies Work Item Type for which the document is associated with      
      work-item-phase:
        type: string
        description: Identifies Work Item Phase in which a document is introduced
      document-type:
        type: string
        description: Identifies document type. For complete list of possible values see [document-type]() classification
      is-mandatory:
        type: boolean
        description: Identifies whether the document is mandatory
      is-printable:
        type: boolean
      is-uploadable:
        type: boolean
      template-name:
        type: string
      template-uri:
        type: string
        format: url
 
  service-fee-calculation-request:
    description: Service fee calculation request.
    properties:
      customer-number:
        description: Customer number of client who is requesting the service.
        type: string
      arrangement-number:
        description: Optional number of arrangement that covers the service for which fee is calculated
        type: string      
      transaction-amount:
        description: Transaction amount
        $ref: '#/definitions/currency'
      service-code:
        description: Service code uniquely identifies service offered to clients such as transfer, currency exchange etc. List of service codes is maintained by [Product API](product-getstarted.html).
        type: string
      channel-code:
        description: Channel code
        type: string
      exchange-direction:
        description: Direction of an exchange service can be `buy` or `sell`
        type: string
        enum:
          - buy
          - sell
      purpose-code:
        description: Purpose code
        type: string
      debtor-account:
        description: Debtor account number
        type: string
      debtor-country:
        description: Debtor country code
        type: string
        format: ISO 3166-1 alpha-2
      debtor-bank-swift:
        description: Debtor swift bank address
        type: string
  service-fee-calculation:
    description: Service fee calculation.
    properties:
      fee-amount:
        description: Charge amount
        $ref: '#/definitions/currency'
      rate:
        description: Fee rate as percentage
        format: double
        type: number
      remaining-fee-waivers:
        description: Number of remaining fee waivers for calculated service
        format: int32
        type: integer

  deposit-terms-request:
    description: Request with details neccessery to calculate deposit offer
    properties:
      deposit-amount:
        description: Amount of deposit
        $ref: '#/definitions/currency'
      term:
        description: The term of deposit. For sight deposits and current accounts `1Y` is expected
        type: string
        format: ISO 8601 duration
      product-code:
        description: Unique identifier of product in bank catalogue
        type: string
      customer-number:
        description: Unique identifier of customer in bank's records
        type: string
    required:
      - deposit-amount
      - term
      - product-code
      - customer-number
    type: object
  deposit-terms:
    description: Deposit terms
    properties:
      principal-amount:
        format: double
        type: number
        description: Principal amount
      term:
        description: The term of deposit. For sight deposits and current accounts `1Y` is expected
        type: string
        format: ISO 8601 duration       
      nominal-interest-rate:
        Description: Interest rate 
        $ref: '#/definitions/interest-rate'
      interest-calculation-method:
        type: string
        description: Method used to calculate interest
        enum: [simple, compounding]
      interest-calculation-basis:
        type: string
        enum: [30-360, 30-365, actual-360, actual-actual, actual-365]
      efective-interest-rate:
        format: double
        type: number
        description: Effective interest rate        
      tax-rate:
        format: double
        type: number
        description: Tax rate
      interest-amount:
        format: double
        type: number
        description: Interest amount.
      tax-amount:
        format: double
        type: number
        description: Tax amount            
      payout-amount:
        format: double
        type: number
        description: Payout amount

  lending-terms-request:
    description: Request with details neccessery to calculate lending terms
    properties:
      borrowed-amount:
        description: Amount borrowed
        $ref: '#/definitions/currency'     
      term:
        description: The term of loan. For overdafts, revolving limits and other open ended facilities  `1Y` is expected
        type: string
        format: ISO 8601 duration
  lending-terms:
    description: Ledning terms
    properties:
      amount:
        description: Borrowed amount in loan currency
        $ref: '#/definitions/currency'
      indexation-amount:
        description: Borrowed amount in indexation currency.
        $ref: '#/definitions/currency'
      local-amount:
        description: Borrowed amount in local currency.
        $ref: '#/definitions/currency'
      term:
        description: Basic information about requested arrangement maturity. Contains information about term duration period and period time unit.
        type: string
        format: ISO 8601 duration
      nominal-interest-rate:
        Description: Interest rate 
        $ref: '#/definitions/interest-rate'
      interest-calculation-method:
        type: string
        description: Method used to calculate interest
        enum: [proportional, compounding]
      interest-calculation-basis:
        type: string
        enum: [30-360, 30-365, actual-360, actual-actual, actual-365]
      efective-interest-rate:
        format: double
        type: number
        description: Effective interest rate
      monthly-repayment:
        description: Amount or repayment
        $ref: '#/definitions/currency'      
      total-interest:
        $ref: '#/definitions/currency'
      total-repayment:
        $ref: '#/definitions/currency'
        description: Total amount paid to bank
      total-fees:
        description: Represents calculated fees
        $ref: '#/definitions/currency'
    
  installment-plan-request:
    description: Request with details neccessery to calculate offered lending terms
    properties:
      borrowed-amount:
        description: Amount borrowed
        $ref: '#/definitions/currency'
      term:
        description: The term of loan. For overdafts, revolving limits and other open ended facilities  `1Y` is expected
        type: string
        format: ISO 8601 duration
      product-code:
        description: Unique identifier of product in bank catalogue
        type: string
      customer-number:
        description: Unique identifier of customer in bank's records
        type: string
      funds-availability-date:
        description: Date from which funds are awailable for drawdown
        type: string  
        format: date
    required:
      - borrowed-amount
      - term
      - product-code
      - customer-number
    type: object
  installment-plan:
    description: Installment plan.
    properties:
      terms:
        $ref: '#/definitions/lending-terms'
      number-of-installments:
        type: number
        format: double
      installments:
        description: Installment plan rows
        items:
          $ref: '#/definitions/installment-plan-row'
        type: array
  installment-plan-row:
    description: Scheduled payment - row in installment plan.
    type: object
    properties:
      ordinal:
        type: integer
        description: Ordinal number of the row in plan
      date:
        type: string
        format: date-time
        description: Payment due date
      activity-kind:
        type: string
        enum:
        - disbursement
        - downpayment
        - repayment
        - interest-payment
        - fee-payment
        - cash-collateral-pledging
        - cash-collateral-release
        description: |
          Classification which can be used by software to recognize the meaning of the activity that triggers the payment. For example, in combination with product type it can be used at front end as a resource id for row description translation into selected culture. Grouping multiple activities into single row is allowed, and then most appropriate classification should be used. For example, disbursement activity may include downpayment, fee-payment, and cash-collateral-pledging. Also repayment activity may include interest-payment, fee-payment, and cash-collateral-release. For deposit products, disbursement activity-kind is used to describe depositing activity, while repayment is used to describe withdrawal.
          For a list of possible values see [installment-activity-kinds](arrangement-classifications.html#installment-activity-kinds) classification.
      description:
        type: string
        description: Description of the activity that triggers the payment. Should be translated in selected culture and front-end applications should use it as is. If description is not provided, front-end applications should use activity-kind to get appropriate description in selected culture.
      disbursement:
        type: number
        format: double
        description: Loan disbursement, deposit, or guarantee opening - principal balance increase
      starting-balance:
        type: number
        format: double
        description: Principal balance before payment
      principal-repayment:
        type: number
        format: double
        description: Principal amount to be repayed.
      interest-repayment:
        type: number
        format: double
        description: Interest amount to be payed
      annuity:
        type: number
        format: double
        description: Sum of principal and interest to be repayed
      outstanding-balance:
        type: number
        format: double
        description: Principal balance after payment
      fee:
        type: number
        format: double
        description: Fee payment
      other-expenses:
        type: number
        format: double
        description: Other expenses
      cash-collateral:
        type: number
        format: double
        description: Positive and negative flows of cash collateral
      deferred-payment:
        type: number
        format: double
        description: Part of payment that is being delayed for some future date. If such defferal exists, then the same amount must be deducted from principal repayment.
      deferred-payment-installment:
        type: number
        format: double
        description: Repayment of aggregated deferred payments
      net-cash-flow:
        type: number
        format: double
        description: Total net cash flow between the bank and the customer
      discounted-net-cash-flow:
        type: number
        format: double
        description: Net cash flow that is being discounted to present value using calculated EAPR
      discounted-disbursement:
        format: double
        type: number
        description: Disbursement flows discounted using APR counted based on discounted-net-flow
      discounted-cash-collateral-flow:
        format: double
        type: number
        description: Cash collateral flows discounted using APR counted based on discounted-net-flow
    example:
      ordinal: 0
      date: 2013-10-21T00:00:00
      activity-kind: disbursement
      description: Loan disbursement and fee
      disbursement: 8000.00
      starting-balance: 0.00
      principal-repayment: 0.00
      interest-repayment: 0.00
      annuity: 0.00
      fee: 80.00
      outstanding-balance: 8000.00
      net-cash-flow: -7920.00
      discounted-net-cash-flow: -7920.00

  deposit-offer-text-request:
    description: Request with details neccessery to prepare deposit offer text
    properties:
      deposit-amount:
        description: Amount of deposit
        $ref: '#/definitions/currency'
      term:
        description: The term of deposit. For sight deposits and current accounts `1Y` is expected
        type: string
        format: ISO 8601 duration
      product-code:
        description: Unique identifier of product in bank catalogue
        type: string
      customer-number:
        description: Unique identifier of customer in bank's records
        type: string
    required:
      - deposit-amount
      - term
      - product-code
      - customer-number
    type: object
  lending-offer-text-request:
    description: Request with details neccessery to prepare deposit offer text
    properties:
      borrowed-amount:
        description: Borrowed amount or credit limit
        $ref: '#/definitions/currency'
      term:
        description: The term of deposit. For sight deposits and current accounts `1Y` is expected
        type: string
        format: ISO 8601 duration
      product-code:
        description: Unique identifier of product in bank catalogue
        type: string
      customer-number:
        description: Unique identifier of customer in bank's records
        type: string
    required:
      - borrowed-amount
      - term
      - product-code
      - customer-number
    type: object    
  common-offer-text:
    description: Common text for deposit and lending offers based on consumer protection regulations
    properties:
      bank-name:
        description: Full name of the bank (1.1)
        type: string
      bank-addres:
        description: Address of the bank (1.2)
        type: string
      customer-name:
        description: Name of the customer (1.3)
        type: string
      customer-address:
        description: Address of the client (1.4)
        type: string
      personal-id-number:
        description: Identification number
        type: string
      product-display-name:
        description: Product name (2.1)
        type: string
      term:
        description: Arrangement term (1a 2.4) (1b 2.5)  (OE 2.2)
        type: string
      currency:
        description: Currency (1a 2.3) (1a OE 2.4) (1b 2.4) (1b OE 2.5)
        type: string        
      nominal-interest-rate:
        description: Nominal interest rate (3.1)
        type: string
      effective-interest-rate:
        description: Effective interest rate (1b 3.2) (OE 3.3)
        type: string    
      interest-calculation-method:
        description: Calculation method (1a 3.3) (1b OE 3.2)
        type: string        
      related-costs:
        description: Related costs (3.3) (1b OE 3.5) (1a OE 3.6)
        type: string 
      early-termination-conditions:
        description: Early termination conditions (4.1)
        type: string        
      complaint-contact-point:
        description: Complaints contact point (1a OE 4.4) (1b OE 4.6)
        type: string        
  lending-offer-text:
    description: Lending offer text
    properties:
      common:
        $ref: '#/definitions/common-offer-text'    
      borrowed-amount:
        description: Loan amount (1b 2.2) (OE 2.3)
        type: string
      deposit-amount:
        description: Deposit or downpayment amount (1b 2.3) (OE 2.4)
        type: string  
      repayments:
        description: Repayments (1b 2.6)
        type: string 
      sureties:
        description: Sureties such as collaterals and guaranties (1b 2.7) (OE 4.3)
      penalty-interest-rate:
        description: Nominal interest rate (1b 3.5) (OE 3.4)
        type: string
      approval-requirements:
        description: Approval requirements (1b 3.4) (1b OE 3.5)
        type: string              
      card-fees:
        description: Unconditional benefits (1b 3.6)
        type: string
      early-repayment-conditions:
        description: Automatic rollover conditions (1b OE 4.2) (OE 4.2)
        type: string
      delinquency-consequences:
        description: Insured deposit amount (1b 4.3) (OE 4.4)
        type: string
      overdraft-repayment-conditions:
        description: Overdraft repayment conditions (1b 4.3) (OE 4.5)
        type: string        
  deposit-offer-text:
    description: Deposit offer text
    properties:
      common:
        $ref: '#/definitions/common-offer-text'      
      deposit-amount:
        description: Amount (1a 2.2) (OE 2.3)
        type: string   
      tax-information:
        description: Tax information (1a OE 3.3)
        type: string
      unconditional-benefits:
        description: Unconditional benefits (1a OE 3.4)
        type: string
      automatic-rollover-conditions:
        description: Automatic rollover conditions (1a OE 4.2)
        type: string
      insured-deposit-amount:
        description: Insured deposit amount (1a OE 4.3)
        type: string

  application-list:
    description: Product account opening list
    allOf:
      - $ref: '#/definitions/paged-list'
    properties:
      applications:
        description: List of account openings
        items:
          $ref: '#/definitions/application'
        type: array
    type: object
    
  draft:
    description: Draft of incomplete product application
    properties:
      draft-id:
        type: string
        readOnly: true
      application:
        $ref: '#/definitions/application'
      editing-step:
        description: Editing step in entry ui flow (wizard) where draft was saved
        type: string
        
  application:
    description: Common information to all kinds of product applications
    discriminator: kind
    required:
    - kind 
    properties:
      application-number:
        description: Unique identifier for application workitem
        type: string
        readOnly: true
      kind:
        description: Enumeration that distinguishes different kinds of product applications
        type: string
        enum: [deposit-opening, current-account-opening, loan-origination]
        x-asee-enumeration: application-kind
      status:
        description: "Status of application. For complete list of possible values see [processing-status](offer-classifications.html#processing-status) enumeration"
        type: string
        enum: [accepted, active, rejected, canceled, approved]
        x-asee-enumeration: processing-status
        readOnly: true        
      customer-number:
        description: Customer number
        type: string
      customer-name:
        description: Customer name
        type: string
      product-code:
        description: A code or short name by which a product can be identified
        type: string
      product-name:
        description: The primary name assigned to the product used in reports and documents
        type: string
      created:
        description: Date and time when application was recorded in the system
        format: date-time
        type: string
        readOnly: true       
      request-date:
        description: Date when application was accepted for processing
        format: date
        type: string
        readOnly: true         
      expiration-date:
        description: Expiration date
        format: date-time
        type: string
        readOnly: true        
      status-changed:
        description: Date and time when application status changed 
        format: date-time
        type: string
        readOnly: true        
      last-modified:
        description: Date and time when application was last modified
        format: date-time
        type: string
        readOnly: true        
      created-by-name: 
        description: "Name of the agent (bank employee) responsible for opening process, who created product account opening"
        type: string
        readOnly: true        
      comments: 
        description: Comments
        type: string
      workitem-phase: 
        description: Work item phase name.
        type: string
        readOnly: true        
  deposit-opening:
    description: Deposit account opening application
    allOf:
      - $ref: '#/definitions/application'
    properties:
      primary-currency:
        description: Primary currency of selected product
        type: string
      initial-amount:
        description: Represents initial amount of funds for deposit opening
        $ref: '#/definitions/currency'        
      parrent-arrangement-number:
        description: Optional identifier of parent arrangement under which this deposit account is opened
        type: string

  loan-origination:
    description: Credit facility application
    allOf:
      - $ref: '#/definitions/application'    
    properties:
      accepted-amount:
        description: Accepted amount.
        $ref: '#/definitions/currency'
      indexation-currency:
        description: Indexation currency of selected product
        type: string
      requested-amount:
        description: Requested amount to borrow
        $ref: '#/definitions/currency'
      downpayment-amount:
        description: Downpayment amount.
        $ref: '#/definitions/currency'
      invoice-amount:
        description: Invoice amount.
        $ref: '#/definitions/currency'     
      product-code:
        description: A code or short name by which a product can be identified.
        type: string        
      term:
        description: Lending arrangement term. For overdrafts, credit limits and other open ended arrangements this value is optional
        type: string
        format: ISO 8601 duration    
      requested-activation-date:
        description: Requested activation date
        format: date-time
        type: string 
      loan-purposes:
        description: List of loan purposes.
        items:
          $ref: '#/definitions/loan-purpose'
        type: array
      lending-terms:
        $ref: '#/definitions/lending-terms'
      installment-plan:
        $ref: '#/definitions/installment-plan'
      is-refinancing:
        description: Indicator if this is the refinancing loan.
        type: boolean
      signing-option:
        description: Indicates how and where customer chose to sign agreement documents
        type: string
        enum: [branch, courier, online]        
      credit-bureau-consent:
        description: Consent for credit bureau inquiry
        type: boolean        
      applicant:
        description: Applicant data
        $ref: '#/definitions/applicant-info'        
      attachments:
        type: array
        items:
          $ref: '#/definitions/attachment'        

  loan-purpose:
    description: Loan purpose
    properties:
      amount:
        description: Amount.
        $ref: '#/definitions/currency'
      account-number:
        description: Account number.
        type: string
      reference-number:
        description: Reference number.
        type: string
      loan-type:
        description: Loan type. For complete list of possible values see [loan-type]() classification.
        type: string
      check-digit-model:
        description: Check digit model.
        type: string
    type: object
  applicant-info:
    description: Customer data.
    properties:
      customer-number:
        description: Customer number.
        type: string
      mothers-maiden-name:
        description: "Customer's mother name."
        type: string
      marital-status:
        description: Marital status. For complete list of possible values see [marital-status]() classification.
        type: string
        enum: [TODO, undisclosed]

      highest-education:
        description: Highest educational level. For complete list of possible values see [education-level]() classification.
        type: string
        enum: [TODO, undisclosed]        
      home-ownership:
        description: Home ownership
        type: string
        enum: [owns, rents, lives-with-relatives, not-disclosed]
      residence-from-date:
        description: Date from which applicant is resident at current address
        format: date
        type: string
      current-address:
        description: Residential address
        $ref: '#/definitions/postal-address'
      home-phone-number:
        description: Home phone number.
        $ref: '#/definitions/telecommunication-number'
      employment:
        description: Applicant employment info
        items:
          $ref: '#/definitions/employment-info'
        type: array
      total-work-period:
        description: Total period of working years and mohts. For example 12 years, 3 months and 4 days is formatted as `P12Y3M4D`
        type: string
        format: ISO 8601 duration
      regular-income:
        description: Customer financial data.
        items:
          $ref: '#/definitions/income'
        type: array
      additional-incomes:
        description: Source of additional income.
        items:
          $ref: '#/definitions/income'
        type: array
      total-additional-income:
        description: Total additional income amount.
        $ref: '#/definitions/currency'        
      income-tax-payer:
        type: boolean
        description: Whether applicant is paying income taxes
      total-monthly-deductions:
        description: Total deduction amount.
        $ref: '#/definitions/currency'
      total-household-income:
        description: Total household income amount
        $ref: '#/definitions/currency'       
      size-of-household:
        description: Number of household members.
        format: int32
        type: integer
      employed-houshold-members:
        description: Number of eployed household members.
        format: int32
        type: integer
      dependent-children:
        description: Number of children.
        format: int32
        type: integer    
      dependent-adults:
        description: Number of dependent adults
        format: int32
        type: integer

 
      car-ownership:
        description: Car assets.
        type: string
        enum: [owns, does-not-own, not-disclosed]        


      additional-info:
        description: Additional info
        type: string        

  address:
    description: Structured address for communication. Used as a common base for postal-address, phone-number and email-address
    type: object
    discriminator: kind
    required:
      - kind
      - formatted
    properties:
      kind:
        description: |
          Kind of structured address. Allowed values are `postal-address`, `phone-number` and `email-address`
          For a list of possible values see [address-kinds](party-classifications.html#address-kinds) enumeration.
        type: string
        enum: [postal-address, phone-number, email-address, facebook-account, web-url]
      formatted:
        description: Formatted address text
        type: string

  postal-address:
    description: Postal delivery address.
    allOf:
      - $ref: "#/definitions/address"
    properties:
      street:
        description: Street name
        type: string
      street-number:
        description: Street number
        type: string
      postal-code:
        description: Postal code
        type: string
      locality:
        description: Populated place such as city, town or village
        type: string
      country:
        description: ISO 3166-1 alpha-2 country code
        type: string
        maxLength: 2
        minLength: 2
      address-code:
        description: Address code assigned for precise postal delivery
        type: string
      coordinates:
        $ref: "#/definitions/coordinates"
    type: object
  coordinates:
    type: object
    required:
      - lat
      - long
    description: The geographic coordinates of a location
    properties:
      lat:
        description: The latitude of a location. For example 37.42242
        format: double
        type: number
      long:
        description: The longitude of a location. For example -122.08585
        format: double
        type: number

  telecommunication-number:
    description: Telecommunication number
    allOf:
      - $ref: "#/definitions/address"
    properties:
      number:
        description: Local number
        maxLength: 8
        minLength: 5
        type: string
      area-code:
        description: AreaCode number
        maxLength: 4
        minLength: 1
        type: string
      country-code:
        description: CountryCode number
        maxLength: 3
        minLength: 1
        type: string
      extension:
        description: Extension number
        maxLength: 6
        minLength: 2
        type: string
    required:
      - number
      - country-code
      - area-code
    type: object    

  employment-info:
    description: Employment info
    properties:
      company-id-number:
        description: Company registration number
        type: string
      employment-start-date:
        description: Employment start date.
        format: date
        type: string
      employment-end-date:
        description: Employment end date.
        format: date
        type: string
      position-category:
        description: Employment position category. For complete list of possible values see [employment-position-category]() classification.
        type: string
      employment-type:
        description: Type of employment. For complete list of possible values see [employment-type]() classification.
        type: string
        enum: [TODO employment type]
      employer-legal-structure:
        description: Employer type. For complete list of possible values see [employer-type]() classification.
        type: string
        enum: [TODO organization legal structure]        
    type: object
  income:
    description: Income
    properties:
      amount:
        description: Income amount
        $ref: '#/definitions/currency'
      source: 
        type: string
        description: classification
        enum: [salary, pension, contract, rent, alimony, royalty, board-membership, separation-allowance ]

  interest-rate:
    description: Interest rate.
    properties:
      period:
        description: Interest rate period
        type: string
        format: ISO 8601 duration 
      percentage:
        description: Interest rate value
        format: double
        type: number
    type: object


# ****************************************************#
# MODELS COMMON WITH OTHER APIs                       #
# ****************************************************#
  currency:
    description: Currency amount and code
    type: object  
    required:
      - amount    
      - code      
    example:
      amount: 200.00    
      code: EUR
    properties:
      amount:
        description: Amount
        format: double
        type: number    
      code:
        description: ISO 4217 3 letter currency code
        type: string
        minLength: 3
        maxLength: 3
  resource-created-result:
    description: Unique identifier of newly created resource that can be used in future inquires and commands
    type: string
  validation-problem:
    type: array
    items:
      type: object
      properties:
        field:
          type: string
        errors:
          type: array
          items:
            type: object
            properties:
              error:
                type: string
              message:
                type: string
    example:
      -  
        field: phone-number
        errors:
          -
            error: invalid-format
            message: Format for this field is invalid
          -
            error: max-length
            message: Content exceeds maximum alowed length 
      - 
        field: account-number
        errors:
          -
            error: check-digit-invalid
            message: Check digit is invalid for this field
  
  business-problem:
    description: Details on specific problem that prevented processing after successfull validation
    type: object 
    properties:
      problem:
        description: Unique literal that identifies specific problem 
        type: string
      message:
        description: Message explaining the situation and optionaly remedies
        type: string
      details:
        description: Optional details supplied for troubleshooting
        type: string
    example:
      problem: document-locked
      message: Document you are trying to access is locked by another user
      details: User john.doe has locked the document
  
  paged-list:
    description: List with support for paging
    properties:
      total-count:
        description: Total number of items in collection
        type: integer
      page-size:
        description: Size of the page
        type: integer
      page:
        description: Index of current page
        type: integer
      total-pages:
        description: Total number of pages of set size
        type: integer
      sort-order:
        description: Sort order (`asc` or `desc`). Default is asc
        type: string
        enum:
        - asc
        - desc
      sort-by:
        description: Attribute of the collection item to sort by
        type: string
  classification-value:
    type: object
    description: Classification value
    properties:
      literal:
        description: Literal that uniquely identifies classification value
        type: string
      code:
        description: Optional numerical code of classification value
        type: string
      description:
        description: Description of classification value
        type: string
      parent-literal:
        description: Optional literal of parent classification value if schema is hierarchical
        type: string
    example:
      literal: billing
      code: 2
      description: Contact may be used to provide party with details of their liabilities to the bank
      
  classification-list:
    description: List of classification schemas
    type: object
    properties:
      items:
        description: List of classification schemas
        items:
          $ref: "#/definitions/classification-info"
        type: array
    example:
      -
        schema-id: filing-purpose
        name: Filing Purpose
        description: List of possible uses of document in business context. Commonly used filing purposes are document, customer-picture
      -
        schema-id: folder-purpose
        name: Folder Purpose
        description: List of possible uses of a folder in business context.
        
  classification-info:
    description: Basic information on classification schema
    properties:
      schema-id:
        type: string
        description: Unique literal that identifies the classification schema. Always in `lowercase-dash` convention.
      name:
        type: string
        description: User friendly name of classification
      description:
        type: string
        description: Description of a classification
    example:
      schema-id: filing-purpose
      name: Filing Purpose
      description: List of possible uses of document in business context. Commonly used filing purposes are document, customer-picture
      
  classification:
    type: object
    description: Classification schema details
    properties:
      schema-id:
        type: string
        description: Unique literal that identifies the classification schema. Always in `lowercase-dash` convention.
      name:
        type: string
        description: User friendly name of classification
      description:
        type: string
        description: Description of a classification
      values:
        description: List of allowed classification values
        type: array
        items:
          $ref: "#/definitions/classification-value"
    example:
      schema-id: contact-purpose
      name: Contact Purpose
      description: List of possible uses of contact in business context. Commonly used filing purposes are billing, marketing
      values:
        - literal: billing
          code: 1
          description: Contact may be used to provide party with details of their liabilities to the bank
        - literal: marketing
          code: 2
          description: Contact may be used to provide party with details of offers
        - literal: reporting
          code: 3
          description: Contact may be used to provide party with reports on their account