swagger: '2.0'
info:
  version: v1
  title: Party API
  description: |
    Party API gives you access to individuals and organizations registered with the financial institution whether they are customers or just prospects or related parties.
    Also you can get all party related information like identification documents, contact points and relationships.
  contact:
    name: Milan Drakulic
    url: http://dev.asseco-see.com/docs/
    email: milan.drakulic@asseco-see.rs
host: dev.aseeco-see.com
basePath: /v1/party
schemes:
  - http
  - https
consumes:
  - application/json
produces:
  - application/json
tags:
  - name: Parties
    description: Working with individuals and organizations
  - name: Contact points
    description: Working with contact points
  - name: Classifications
    description: Working with classifications
paths:
  '/parties':
    get:
      summary: Search list of parties registered by bank
      tags:
        - Parties
      x-asee-tags:
        - Pageable
        - Shapeable
        - Sortable         
      operationId: Parties_GetList
      parameters:
        - name: kind
          in: query
          description: Party kind. If omitted or not present both individuals and organizations are returned.
          type: string
          enum: [individual, organization]
        - name: statuses
          in: query
          description: Customer statuses of interest to filter parties. If omitted or not present all customer statuses are considered interesting.
          type: array
          items:
            type: string
            enum: [potential, prospective, active, dormant, former, declined, rejected]
          collectionFormat: csv
        - name: id-number
          description: External identity number taken from original or certified documents. Must be used in conjuntion with `id-kind` parameter.
          in: query
          type: string
        - name: id-kind
          in: query
          description: 'Kind of identification number. Common values are `personal-id-number`, `passport-number`, `registration-number`'
          type: string
          enum: [registration-number, tax-id-number, personal-id-number, identity-card-number, passport-number, driver-license-number, social-security-number]  
        - $ref: '#/parameters/name-param'
        - $ref: '#/parameters/telecommunication-number-param'
        - $ref: '#/parameters/email-param'
        - $ref: '#/parameters/facebook-account-param'          
        - $ref: "#/parameters/page-param"
        - $ref: "#/parameters/page-size-param"
        - $ref: "#/parameters/sort-by-param"
        - $ref: "#/parameters/sort-order-param"
        - $ref: "#/parameters/include-param"
        - $ref: "#/parameters/trim-param"          
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/paged-party-list'
        default:
          $ref: '#/responses/default-error-response'
  '/parties/search':
    get:
      summary: Search list of parties registered by bank
      description: "Returns a list of parties that match filters and search terms accross textual fields such as name, address. Assumed sort is by relevance and then by recency. For addresses tagged with geographic coordinates radius filter can be applied"
      tags:
        - Parties
      x-asee-tags:
        - Searchable
        - Geospatial
        - Pageable
        - Shapeable
      operationId: Parties_Search
      parameters:
        - description: Party kind
          in: query
          name: kind
          required: false
          type: string
          enum: [individual, organization]
        - $ref: '#/parameters/search-query-param'
        - $ref: '#/parameters/search-fields-param'
        - $ref: '#/parameters/search-mode-param'
        - $ref: '#/parameters/latitude-param'
        - $ref: '#/parameters/longitude-param'
        - $ref: '#/parameters/radius-param'          
        - $ref: "#/parameters/page-param"
        - $ref: "#/parameters/page-size-param"
        - $ref: "#/parameters/include-param"
        - $ref: "#/parameters/trim-param"             
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/paged-party-list'
        default:
          $ref: '#/responses/default-error-response'
  '/parties/{party-number}':
    get:
      summary: Get details of specific party
      tags:
        - Parties
      x-asee-tags:
        - Shapeable
      operationId: Parties_Get
      parameters:
        - description: Unique identifier of the party. Also known as customer number.
          in: path
          name: party-number
          required: true
          type: string
        - $ref: "#/parameters/include-param"
        - $ref: "#/parameters/trim-param"             
      responses:
        200:
          description: OK
          schema:
            $ref: '#/definitions/party'
        default:
          $ref: '#/responses/default-error-response'    
  '/parties/{party-number}/relationships':
    parameters:
        - description: Unique identifier of the party. Also known as customer number.
          in: path
          name: party-number
          required: true
          type: string  
    get:
      summary: Get list of party relationships
      tags:
        - Parties
      operationId: Parties_Relationship_GetList
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/party-relationship'
        default:
          $ref: '#/responses/default-error-response'                     
  '/parties/{party-number}/id-documents':
    parameters:
        - description: Unique identifier of the party. Also known as customer number.
          in: path
          name: party-number
          required: true
          type: string  
    get:
      summary: Get list of id documents for party
      tags:
        - Parties
      operationId: Parties_IdDocuments_GetList
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/identification-document'
        default:
          $ref: '#/responses/default-error-response'           
  '/parties/{party-number}/contact-preference':
    patch:
      summary: Modify party contact preference
      tags:
        - Parties
      operationId: Parties_ContactPreference_Modify
      parameters:
        - description: Unique identifier of the party. Also known as customer number.
          in: path
          name: party-number
          required: true
          type: string
        - description: Command contains contact preferences
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/modify-contact-preference-command'
      responses:
        '204':
          description: No content
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'          
        '440':
          description: |
            Your request was well constructed but it does not comply with business policy. Consider the following possible problems and look into response for more details:
          schema:
            $ref: '#/definitions/business-problem'              
        default:
          $ref: '#/responses/default-error-response'          
  '/parties/{party-number}/contact-points':
    parameters:
        - description: Unique identifier of the party. Also known as customer number.
          in: path
          name: party-number
          required: true
          type: string  
    get:
      summary: Search list of parties registered by bank
      tags:
        - Contact points
      operationId: Parties_GetContactPoints
      parameters:
        - $ref: '#/parameters/method-param'
        - $ref: '#/parameters/usage-param'             
      responses:
        200:
          description: OK
          schema:
            type: array
            items:
              $ref: '#/definitions/contact-point'
        default:
          $ref: '#/responses/default-error-response' 
    post:
      summary: Register party contact point
      tags:
        - Contact points
      operationId: Parties_RegisterContactPoints
      parameters:
        - description: Command contains details of individual to be registered
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/register-contact-point-command'
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/resource-created-result'
          headers:
            Location:
              type: string
              description: The URL of the newly registered contact point
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'          
        '440':
          description: |
            Your request was well constructed but it does not comply with business policy. Consider the following possible problems and look into response for more details:
          schema:
            $ref: '#/definitions/business-problem'              
        default:
          $ref: '#/responses/default-error-response'
  '/parties/{party-number}/contact-points/{id}':
    parameters:
      - description: Unique identifier of the party. Also known as customer number
        in: path
        name: party-number
        required: true
        type: string
      - description: Unique identifier of the contact point
        in: path
        name: id
        required: true
        type: string
    patch:
      summary: Modify party contact point
      tags:
        - Contact points
      operationId: Parties_ModifyContactPoint
      parameters:
        - description: Command contains details of individual to be registered
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/modify-contact-point-command'
      responses:
        '204':
          description: No content
        '400':
          description: |
            Your request was well not well constructed. Look into validation error in response for more details.
          schema:
            $ref: '#/definitions/validation-problem'          
        '440':
          description: |
            Your request was well constructed but it does not comply with business policy. Consider the following possible problems and look into response for more details:
          schema:
            $ref: '#/definitions/business-problem'              
        default:
          $ref: '#/responses/default-error-response'        
  '/parties/individuals':
    post:
      summary: Register individual
      description: |
        Registers new individual according to specified registration profile that determines which fields are mandatory. 
        > Mandatory fields for `contact` registration profile:
        - `given-name`
        - `surname`
        - `mobile-phone`
        - `email-address`
        
        > Additional mandatory fields for `prospect` registration profile:
        - `contact-address`
        - `id-number`

        > Additional mandatory fields for `customer` registration profile:
        - `birth-place`
        - `birth-country`       
        - `country-of-residence`
        - `legal-address`
        - `delivery-address`
        - `employment-status`
        
      tags:
        - Parties
      operationId: Individuals_Register
      parameters:
        - description: Command contains details of individual to be registered
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/register-individual-command'
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/resource-created-result'
          headers:
            Location:
              type: string
              description: The URL of the newly registered individual          
        default:
          $ref: '#/responses/default-error-response'                
  '/parties/organizations':
    post:
      summary: Register organization
      description: |
        Registers new organization according to specified registration profile that determines which fields are mandatory. 
        > Mandatory fields for `contact` registration profile:
        - `commercial-name`
        - `phone`
        
        > Additional mandatory fields for `prospect` registration profile:
        - `contact-address`
        - `id-number`
        - `registered-name`

        > Additional mandatory fields for `customer` registration profile:
        - `organization-purpose`
        - `legal-address`
        - `delivery-address`
        - `established`
      tags:
        - Parties
      operationId: Organizations_Register
      parameters:
        - description: Command contains details of organization to be registered
          in: body
          name: cmd
          required: true
          schema:
            $ref: '#/definitions/register-organization-command'
      responses:
        '201':
          description: Created
          schema:
            $ref: '#/definitions/resource-created-result'
          headers:
            Location:
              type: string
              description: The URL of the newly registered organization          
        default:
          $ref: '#/responses/default-error-response'

  '/classifications':
    get:
      summary: List all classification schemas used by the API
      description: Some fields and parameters have been restricted to a list of allowed lookup values maintained by the bank. This method lists all schemas used in this API.
      operationId: "Classifications_GetList"
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/classification-list'
        default:
          $ref: '#/responses/default-error-response'
      tags:
        - Classifications
  '/classifications/{schema-id}':
    get:
      summary: List values allowed by given classification schema.
      description: Returns all classification values for chosen classification.
      operationId: Classifications_Get
      parameters:
        - $ref: '#/parameters/schema-id-param'
      responses:
        '200':
          description: OK
          schema:
            $ref: '#/definitions/classification'
        default:
          $ref: '#/responses/default-error-response'

      tags:
        - Classifications          
responses:
  default-error-response:
    description: Besides specific status codes above, other standard http [status codes](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html) can be returned for each request. To learn more see general guidance on [error handling](common-getstarted.html#error-handling)
    
definitions:
 
  paged-party-list:
    description: List of parties
    type: object
    x-asee-trimmed:
      - parties.contact-points
      - parties.relationships
      - parties.id-documents
    allOf:
      - $ref: '#/definitions/paged-list'
    properties:
      parties:
        $ref: '#/definitions/party'
  party:
    description: Command with details for party registration
    type: object
    required:
    - kind
    discriminator: kind
    properties:
      kind:
        type: string
        enum: [individual, organization]
      party-number:
        description: Unique identifier of the party. Also known as customer number.
        type: string        
      contact-name:
        description: "Primary current name of party used by bank for contact purposes. For organizations it is usually same as organization's legal name and for individuals same as person's full name."
        type: string
      contact-preference:
        $ref: '#/definitions/contact-preference'        
      primary-id:
        $ref: '#/definitions/identification-number'
      country-of-residence:
        description: Party's country of residence
        type: string
        format: ISO 3166-1 alpha-2
        minLength: 2
        maxLength: 2
      profile-image-url:
        type: string
        format: url
        description: URL of profile image kept in contnent repository
      customer:
        $ref: "#/definitions/customer"
      contact-points:
        type: array
        items:
          $ref: '#/definitions/contact-point'
      relationships:
        type: array
        items:
          $ref: '#/definitions/party-relationship'          
  organization:
    description: Organization
    type: object
    allOf:
      - $ref: '#/definitions/party'
    properties:
      registered-name:
        description: "Legal name under which oganization is established"
        type: string
      commercial-name:
        description: "The primary commercial name of an organization, by which it is most commonly recognized"
        type: string        
      legal-structure:
        type: string
        x-asee-classification: legal-structure
        description: 'Classifies organizations based on their legal form or structure. For example, `public-organization`, `partnership`, `sole-proprietorship`, `limited-company`.such as trust, company, charity, or estate. For a complete list of possible values see [legal-structure](party-classifications.html#legal-structure)'
      organization-purpose:
        type: string
        x-asee-classification: organization-purpose
        description: 'Distinguishes between organizations according to their purpose or format; for example, `association` and `public-service`. For a complete list of possible values see [organization-purpose](party-classifications.html#organization-purpose)' 
      is-sole-trader:
        type: boolean
        description: 'A flag indicating that this organization represents the business aspects of an individual operating as a sole trader. The relevant Individual can be traced through the party relationship.'
      established:
        description: Date on which organization was formally established
        type: string
        format: date
  individual:
    description: Individual
    type: object
    allOf:
      - $ref: '#/definitions/party'    
    properties:
      full-name:
        description: Human readable name of the object by which it is best recognized.
        type: string
      given-name:
        description: "Name given to individual at birth usually by parents. For example *John* or *Jane*"
        maxLength: 40
        minLength: 2
        type: string
      surname:
        description: "Part of an individual's name which belongs to the family the individual is a part of. For example *Smith*, *Mueller*"
        maxLength: 40
        minLength: 2
        type: string
      maiden-name:
        description: "Individual's surname as it existed prior to any change of surname resulting from any marriage. In many countries, legal and/or social and cultural conventions dictate or suggest that one spouse assume the surname of the other spouse upon their marriage"
        maxLength: 40
        minLength: 2
        type: string         
      gender:
        description: 'Gender is the characteristic pertaining to, and differentiating between, masculinity and femininity'
        type: string
        enum: [female, male, unknown]
      birth-date:
        description: Person's date of birth
        format: date
        type: string
      place-of-birth:
        description: Person's place of birth
        type: string
      country-of-birth:
        description: Person's country of birth
        type: string
        format: ISO 3166-1 alpha-2
        minLength: 2
        maxLength: 2  
      citizenship:
        description: Country of citizenship entered from original or certified document
        type: string
        format: ISO 3166-1 alpha-2
        minLength: 2
        maxLength: 2        
      legal-competency:
        description: 'Enumeration that distinguishes whether individual has any legal limitation on their ability to transact business with bank'
        type: string
        enum: [incompetent-minor, competent-adult]
      marital-status:
        description: Marital status
        enum:
          - divorced
          - common-law-marriage
          - married
          - single
          - widowed
        type: string
      employment-status:
        description: 'Employment status of the individual. Commonly used values are `full-time`, `part-time`, `retired`, `student`, `self-employed`, `unenployed` For complete list of possible values see [employment-status](party-classifications.html#employment-status) classification.'
        type: string
      employment:
        $ref: '#/definitions/employment'
      id-documents:
        description: List of identification documents
        items:
          $ref: '#/definitions/identification-document'
        type: array
  customer:
    description: Details on party as a bank's customer
    type: object
    properties:
      kind:
        type: string
        x-asee-classification: customer-taxonomy
        description: 'Classifies customers according to taxonomy defined by bank. For a complete list of possible values see [customer-taxonomy](party-classifications.html#customer-taxonomy) classification'      
      status:
        description: 'Identifies the state of a customer within a lifecycle model. Values see in [customer-status](party-classifications.html#customer-status) classification.'
        x-asee-classification: customer-status        
        type: string
      segment:
        type: string
        x-asee-classification: customer-segment
        description: 'Classifies the customers into segments according to bank requirements. For a complete list of possible values see [customer-segment](party-classifications.html#customer-segment) classification'             
  party-relationship:
    type: object
    description: Relationship between two parties - individuals and organizations
    properties:
      kind:
        type: string
        enum: [marriage, family, ownership, representation, employment]
      role:
        type: string
        enum: [spouse, child, parent, sibling, cousin, owner, owned, representative, represented, employer, employee]      
      to-party:
        type: object
        properties:
          number:
            type: string
            description: Unique identifier of other party in a relationship
          name:
            type: string
            description: Name of other party in a relationship
          kind:
            type: string
            enum: [individual, organization]        
  employment:
    description: Employment information for individual
    properties:
      employer:
        description: Employer name
        type: string
      employment-date:
        description: Date of employment at current employer
        format: date-time
        type: string
      employment-position:
        description: Employment position held by individual
        type: string
    type: object            
    
  contact-preference:
    description: General contact preference
    properties:
      preferred-language:
        x-asee-compliance: This should be related to some classification.
        description: Preferred communication language
        type: string
      opt-ins:
        description: 'Purposes for which party allowes to be contacted. For a complete list of possible values see [contact-purpose](party-classifications.html#contact-purpose) classification'
        items:
          type: string
        type: array
        x-asee-classification: contact-purpose
      opt-outs:
        description: 'Purposes for which party does not allow to be contacted. For a complete list of possible values see [contact-purpose](party-classifications.html#contact-purpose) classification'
        items:
          type: string
        type: array
        x-asee-classification: contact-purpose
    type: object
  contact-point:
    description: Point of contact for party dependendent on the different means of communication delivery such as postal, telephony, electronic delivery
    properties:
      id:
        description: Unique identifier of this contact point
        type: string
        readOnly: true
      method:
        description: Enumeration that explains method od contact. Common values are `postal`, `gsm` and `email`
        type: string
        enum: [postal, pstn, gsm, fax, facebook, email, web]
      usage:
        description: 'Enumeration that explains context of usage of the contact. Commonly used values are `home`, `work`, `business` and `default` which has a special meaning of being a primary contact'
        type: string
        default: default
        enum: [default, home, business, work, seasonal, assistant, delivery, legal]
      address:
        $ref: '#/definitions/address'
      contact-preference:
        $ref: '#/definitions/contact-preference'
    type: object
  address:
    description: Structured address for communication. Used as a common base for postal-address, phone-number and email-address
    type: object
    discriminator: kind
    required:
      - kind
      - formatted
    properties:
      kind:
        description: Kind of structured address. Allowed values are `postal-address`, `phone-number` and `email-address`
        type: string
        enum: [postal-address, phone-number, email-address, facebook-account, web-url]
      formatted:
        description: Formatted address text
        type: string 
  electronic-address:
    description: Electronic address such as email, url or faebook account
    type: object
    allOf:
      - $ref: "#/definitions/address"  
  postal-address:
    description: Postal delivery address.
    allOf:
      - $ref: "#/definitions/address"
    properties:
      street:
        description: Street name
        type: string
      street-number:
        description: Street number
        type: string
      postal-code:
        description: Postal code
        type: string
      locality:
        description: Populated place such as city, town or village
        type: string
      country:
        description: ISO 3166-1 alpha-2 country code
        type: string
        maxLength: 2
        minLength: 2        
      address-code:
        description: Address code assigned for precise postal delivery
        type: string
      coordinates:
        $ref: "#/definitions/coordinates"
    type: object
  coordinates:
    type: object
    required:
      - lat
      - long
    description: The geographic coordinates of a location
    properties:
      lat:
        description: The latitude of a location. For example 37.42242
        format: double
        type: number
      long:
        description: The longitude of a location. For example -122.08585
        format: double
        type: number
  telecommunication-number:
    description: Telecommunication number
    allOf:
      - $ref: "#/definitions/address"
    properties:
      number:
        description: Local number
        maxLength: 8
        minLength: 5
        type: string
      area-code:
        description: AreaCode number
        maxLength: 4
        minLength: 1
        type: string
      country-code:
        description: CountryCode number
        maxLength: 3
        minLength: 1
        type: string
      extension:
        description: Extension number
        maxLength: 6
        minLength: 2
        type: string
    required:
      - number
      - country-code
      - area-code
    type: object        
    
  identification-number:
    description: 'Acceptable external identity number taken from original or certified documents that contain identification details of individial or organization such as full name,  date of birth, registered name, date of establishment etc.'
    properties:
      number:
        description: Identification number
        type: string
      kind:
        description: 'Kind of identification number. Common values are `personal-id-number`, `passport-number`, `registration-number` '
        type: string
        enum: [registration-number, tax-id-number, personal-id-number, identity-card-number, passport-number, driver-license-number, social-security-number]
    type: object
    required:
      - number
      - kind
  identification-document:
    description: Document that was used to identify individual
    properties:
      kind:
        description: Enumeration that distinguishes between different kinds of identification documents
        type: string
        enum: [passport, national-id-card, drivers-license]    
      serial-number:
        description: Registered serial number of identification document
        type: string        
      issued:
        description: Date when document was issued
        format: date
        type: string          
      valid-until:
        description: Date untill document is valid
        format: date
        type: string
      status:
        description: Status of document
        type: string
        enum: [active, annulled, expired]
      place-of-issue:
        description: Reference to the place where document is issued
        maxLength: 40
        minLength: 2
        type: string
      issuing-authority:
        description: The authority that issued the document
        maxLength: 100
        minLength: 2
        type: string        
      content-url:
        description: URL of scanned document image kept in DMS repository
        type: string
        format: url
    type: object      


  register-individual-command:
    description: Command with details to register individual.
    properties:
      registration-profile:
        type: string
        enum: [contact, prospect, customer]
      given-name:
        description: "Name given to individual at birth usually by parents. For example *John* or *Jane*. Mandatory in following registration profiles: `contact`, `prospect`, `customer`"
        maxLength: 40
        minLength: 2
        type: string
      surname:
        description: "Part of an individual's name which belongs to the family the individual is a part of. For example *Smith*, *Mueller*. Mandatory in following registration profiles: `contact`, `prospect`, `customer`"
        maxLength: 40
        minLength: 2
        type: string
      maiden-name:
        description: "Individual's surname as it existed prior to any change of surname resulting from any marriage. In many countries, legal and/or social and cultural conventions dictate or suggest that one spouse assume the surname of the other spouse upon their marriage"
        maxLength: 40
        minLength: 2
        type: string      
      mobile-phone:
        $ref: '#/definitions/telecommunication-number'
      email-address:
        $ref: '#/definitions/electronic-address'
      contact-address:
        $ref: '#/definitions/postal-address'
      id-number:
        $ref: '#/definitions/identification-number'
      
      id-document:
        $ref: '#/definitions/identification-document'
      birth-place:
        description: Name of the populated place where individual was born
        type: string
      birth-country:
        description: Country where individual was born
        maxLength: 2
        minLength: 2
        type: string
        format: ISO 3166-1 alpha-2
      country-of-residence:
        description: Country where individual has legal residence
        maxLength: 2
        minLength: 2
        type: string
        format: ISO 3166-1 alpha-2
        
      legal-address:
        $ref: '#/definitions/postal-address'

      delivery-address:
        $ref: '#/definitions/postal-address'
      employment-status:
        description: "The status of the Individual's employment. Eg:employed, farmer, leave-of-absence, not-employed, part-time-job...."
        x-asee-compliance: This property should be related to classification.
        maxLength: 50
        minLength: 0
        type: string
      party-number:
        description: 'Business identifier of the party if previously registered as prospect'
        maxLength: 30
        minLength: 0
        type: string
    required:
      - registration-profile
      - given-name
      - surname
      - mobile-phone
    type: object
    
  register-organization-command:
    description: Command with details to register organization
    required:
      - registration-profile
      - commercial-name
      - phone
    type: object    
    properties:
      registration-profile:
        type: string
        enum: [contact, prospect, customer]   
      registered-name:
        description: "Legal name under which oganization is established"
        type: string
      commercial-name:
        description: "The primary commercial name of an organization, by which it is most commonly recognized"
        type: string        
      legal-structure:
        type: string
        x-asee-classification: legal-structure
        description: 'Classifies organizations based on their legal form or structure. For example, `public-organization`, `partnership`, `sole-proprietorship`, `limited-company`.such as trust, company, charity, or estate. For a complete list of possible values see [legal-structure](party-classifications.html#legal-structure)'
      organization-purpose:
        type: string
        x-asee-classification: organization-purpose
        description: 'Distinguishes between organizations according to their purpose or format; for example, `association` and `public-service`. For a complete list of possible values see [organization-purpose](party-classifications.html#organization-purpose)' 
      established:
        description: Date on which organization was formally established
        type: string
        format: date    
      phone:
        $ref: '#/definitions/telecommunication-number'
      email-address:
        $ref: '#/definitions/electronic-address'
      contact-address:
        $ref: '#/definitions/postal-address'
      id-number:
        $ref: '#/definitions/identification-number'
      legal-address:
        $ref: '#/definitions/postal-address'
      delivery-address:
        $ref: '#/definitions/postal-address'    
  register-contact-point-command:
    description: Command to register new contact address
    properties:
      contact-point:
        $ref: '#/definitions/contact-point'
    required:
      - contact-point
    type: object

  modify-contact-point-command:
    description: Command to register new contact address
    properties:
      contact-point:
        $ref: '#/definitions/contact-point'
    required:
      - contact-point
    type: object

  modify-contact-preference-command:
    description: Command to register new contact address
    properties:
      contact-preference:
        $ref: '#/definitions/contact-preference'
    required:
      - contact-preference
    type: object    
  resource-created-result:
    description: Unique identifier of newly created resource that can be used in future inquires and commands
    type: string
  validation-problem:
    type: array
    items:
      type: object
      properties:
        field:
          type: string
        errors:
          type: array
          items:
            type: object
            properties:
              error:
                type: string
              message:
                type: string
    example:
      -  
        field: phone-number
        errors:
          -
            error: invalid-format
            message: Format for this field is invalid
          -
            error: max-length
            message: Content exceeds maximum alowed length 
      - 
        field: account-number
        errors:
          -
            error: check-digit-invalid
            message: Check digit is invalid for this field
  business-problem:
    description: Details on specific problem that prevented processing after successfull validation
    type: object 
    properties:
      problem:
        description: Unique literal that identifies specific problem 
        type: string
      message:
        description: Message explaining the situation and optionaly remedies
        type: string
      details:
        description: Optional details supplied for troubleshooting
        type: string
    example:
      problem: document-locked
      message: Document you are trying to access is locked by another user
      details: User john.doe has locked the document
  paged-list:
    description: List with support for paging
    properties:
      total-count:
        description: Total number of items in collection
        type: integer
      page-size:
        description: Size of the page
        type: integer
      page:
        description: Index of current page
        type: integer
      total-pages:
        description: Total number of pages of set size
        type: integer
      sort-order:
        description: Sort order (`asc` or `desc`). Default is asc
        type: string
        enum:
        - asc
        - desc
      sort-by:
        description: Attribute of the collection item to sort by
        type: string
  classification-value:
    type: object
    description: Classification value
    properties:
      literal:
        description: Literal that uniquely identifies classification value
        type: string
      code:
        description: Optional numerical code of classification value
        type: string
      description:
        description: Description of classification value
        type: string
      parent-literal:
        description: Optional literal of parent classification value if schema is hierarchical
        type: string
    example:
      literal: billing
      code: 2
      description: Contact may be used to provide party with details of their liabilities to the bank
  classification-list:
    description: List of classification schemas
    type: object
    properties:
      items:
        description: List of classification schemas
        items:
          $ref: "#/definitions/classification-info"
        type: array
    example:
      -
        schema-id: filing-purpose
        name: Filing Purpose
        description: List of possible uses of document in business context. Commonly used filing purposes are document, customer-picture
      -
        schema-id: folder-purpose
        name: Folder Purpose
        description: List of possible uses of a folder in business context.
  classification-info:
    description: Basic information on classification schema
    properties:
      schema-id:
        type: string
        description: Unique literal that identifies the classification schema. Always in `lowercase-dash` convention.
      name:
        type: string
        description: User friendly name of classification
      description:
        type: string
        description: Description of a classification
    example:
      schema-id: filing-purpose
      name: Filing Purpose
      description: List of possible uses of document in business context. Commonly used filing purposes are document, customer-picture
  classification:
    type: object
    description: Classification schema details
    properties:
      schema-id:
        type: string
        description: Unique literal that identifies the classification schema. Always in `lowercase-dash` convention.
      name:
        type: string
        description: User friendly name of classification
      description:
        type: string
        description: Description of a classification
      values:
        description: List of allowed classification values
        type: array
        items:
          $ref: "#/definitions/classification-value"
    example:
      schema-id: contact-purpose
      name: Contact Purpose
      description: List of possible uses of contact in business context. Commonly used filing purposes are billing, marketing
      values:
        - literal: billing
          code: 1
          description: Contact may be used to provide party with details of their liabilities to the bank
        - literal: marketing
          code: 2
          description: Contact may be used to provide party with details of offers
        - literal: reporting
          code: 3
          description: Contact may be used to provide party with reports on their account

parameters:
  telecommunication-number-param:
    description: Telecommunication number
    in: query
    name: telecommunication-number
    required: false
    type: string
  email-param:
    description: Electronic address
    in: query
    name: email
    required: false
    type: string
  facebook-account-param:
    description: Facebook account
    in: query
    name: facebook-account
    required: false
    type: string
  name-param:
    description: Party name
    in: query
    name: name
    required: false
    type: string
  method-param:
    description: 'Contact methods of interest to filter contact points. Common values are `postal`, `gsm` and `email`. If empty or not present, all contact methods are considered interesting'
    in: query
    name: metohod
    required: false
    items:
      type: string
    type: array
    enum: [postal, pstn, gsm, fax, facebook, email, web]
    collectionFormat: csv
  usage-param:
    description: 'Usages of interest to filter contact points. Commonly used values are `home`, `work`, `business` and `default` which has a special meaning of being a primary contact. If empty or not present, all usages are considered interesting.'
    in: query
    name: usage
    required: false
    items:
      type: string
    type: array
    enum: [default, home, business, work, seasonal, assistant, delivery, legal]
    collectionFormat: csv

  latitude-param:
    description: Geographic latitude of the location of map center. Used for geospatial search of transactions that have been geocoded.
    in: query
    name: lat
    required: false
    format: double
    type: number
  longitude-param:
    description: Geographic longitude of the location of map center. Used for geospatial search of transactions that have been geocoded.
    in: query
    name: long
    required: false
    format: double
    type: number
  radius-param:
    description: Radius (in km) from location on map specified by latitude and longitude. Used for geospatial search of transactions that have been geocoded.
    in: query
    name: radius
    required: false
    format: double
    type: number
  search-query-param:
    name: q
    in: query
    description: The text to search for. All searchable fields are searched by default unless search-fields is specified. When searching searchable fields, the search text itself is tokenized, so multiple terms can be separated by white space (e.g. `q=hello world`).
    required: true
    type: string
  search-fields-param:
    description: The list of comma-separated field names to search for the specified text. Target fields must be marked as searchable
    in: query
    name: search-fields
    type: array
    items:
      type: string
    collectionFormat: csv
  search-mode-param:
    name: search-mode
    in: query
    description: Specifies whether any or all of the search terms must be matched in order to count the document as a match.
    type: string
    enum:
    - any
    - all
    required: false
  schema-id-param:
    name: schema-id
    description: Identifier of classification schema
    in: path
    required: true
    type: string
  page-param:
    name: page
    in: query
    description: Page index. For more information see general guidance on [paging](common-getstarted.html#paging)
    type: integer
    default: 1
    x-asee-common: true
  page-size-param:
    name: page-size
    in: query
    description: Number of items on a page. For more information see general guidance on [paging](common-getstarted.html#paging)
    required: false
    type: integer
    default: 10
    x-asee-common: true
  sort-order-param:
    description: Sort order (`asc` or `desc`). Default is asc. For more information see general guidance on [sorting](common-getstarted.html#sorting)
    in: query
    name: sort-order
    type: string
    default: asc
    enum:
    - asc
    - desc
    x-asee-common: true
  sort-by-param:
    description: Attribute of the collection item to sort by. For more information see general guidance on [sorting](common-getstarted.html#sorting)
    in: query
    name: sort-by
    type: string
    x-asee-common: true
  include-param:
    description: List of fields to include in response. For more information see general guidance on [response shaping](common-getstarted.html#shaping)
    in: query
    name: include
    type: array
    items:
      type: string
    collectionFormat: csv
    x-asee-common: true
  trim-param:
    description: List of fields to trim from response. For more information see general guidance on [response shaping](common-getstarted.html#shaping)
    in: query
    name: trim
    type: array
    items:
      type: string
    collectionFormat: csv
    x-asee-common: true